# ATÄ°S Queue Worker Configuration for Supervisor
# Place this file in /etc/supervisor/conf.d/atis-worker.conf
# Then run: sudo supervisorctl reread && sudo supervisorctl update

[program:atis-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/atis/backend/artisan queue:work --sleep=3 --tries=3 --max-time=3600 --memory=512
directory=/var/www/atis/backend
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=www-data
numprocs=4
redirect_stderr=true
stdout_logfile=/var/log/supervisor/atis-worker.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stopwaitsecs=3600

# Environment variables
environment=LANG=en_US.UTF-8,LC_ALL=en_US.UTF-8

[group:atis]
programs=atis-worker
priority=999